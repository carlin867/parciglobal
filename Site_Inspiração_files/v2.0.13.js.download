(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Feedback=f()}})(function(){var define,module,exports;return function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){(function(global){var LARGE_ARRAY_SIZE=200;var HASH_UNDEFINED="__lodash_hash_undefined__";var HOT_COUNT=800,HOT_SPAN=16;var MAX_SAFE_INTEGER=9007199254740991;var argsTag="[object Arguments]",arrayTag="[object Array]",asyncTag="[object AsyncFunction]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",nullTag="[object Null]",objectTag="[object Object]",proxyTag="[object Proxy]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",undefinedTag="[object Undefined]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var reRegExpChar=/[\\^$.*+?()[\]{}|]/g;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsUint=/^(?:0|[1-9]\d*)$/;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self;var root=freeGlobal||freeSelf||Function("return this")();var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports;var freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports;var freeProcess=moduleExports&&freeGlobal.process;var nodeUtil=function(){try{var types=freeModule&&freeModule.require&&freeModule.require("util").types;if(types){return types}return freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}();var nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray;function apply(func,thisArg,args){switch(args.length){case 0:return func.call(thisArg);case 1:return func.call(thisArg,args[0]);case 2:return func.call(thisArg,args[0],args[1]);case 3:return func.call(thisArg,args[0],args[1],args[2]);}return func.apply(thisArg,args)}function baseTimes(n,iteratee){var index=-1,result=Array(n);while(++index<n){result[index]=iteratee(index)}return result}function baseUnary(func){return function(value){return func(value)}}function getValue(object,key){return object==null?undefined:object[key]}function overArg(func,transform){return function(arg){return func(transform(arg))}}var arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype;var coreJsData=root["__core-js_shared__"];var funcToString=funcProto.toString;var hasOwnProperty=objectProto.hasOwnProperty;var maskSrcKey=function(){var uid=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return uid?"Symbol(src)_1."+uid:""}();var nativeObjectToString=objectProto.toString;var objectCtorString=funcToString.call(Object);var reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Buffer=moduleExports?root.Buffer:undefined,Symbol=root.Symbol,Uint8Array=root.Uint8Array,allocUnsafe=Buffer?Buffer.allocUnsafe:undefined,getPrototype=overArg(Object.getPrototypeOf,Object),objectCreate=Object.create,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,symToStringTag=Symbol?Symbol.toStringTag:undefined;var defineProperty=function(){try{var func=getNative(Object,"defineProperty");func({},"",{});return func}catch(e){}}();var nativeIsBuffer=Buffer?Buffer.isBuffer:undefined,nativeMax=Math.max,nativeNow=Date.now;var Map=getNative(root,"Map"),nativeCreate=getNative(Object,"create");var baseCreate=function(){function object(){}return function(proto){if(!isObject(proto)){return{}}if(objectCreate){return objectCreate(proto)}object.prototype=proto;var result=new object;object.prototype=undefined;return result}}();function Hash(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{};this.size=0}function hashDelete(key){var result=this.has(key)&&delete this.__data__[key];this.size-=result?1:0;return result}function hashGet(key){var data=this.__data__;if(nativeCreate){var result=data[key];return result===HASH_UNDEFINED?undefined:result}return hasOwnProperty.call(data,key)?data[key]:undefined}function hashHas(key){var data=this.__data__;return nativeCreate?data[key]!==undefined:hasOwnProperty.call(data,key)}function hashSet(key,value){var data=this.__data__;this.size+=this.has(key)?0:1;data[key]=nativeCreate&&value===undefined?HASH_UNDEFINED:value;return this}Hash.prototype.clear=hashClear;Hash.prototype["delete"]=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function ListCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function listCacheClear(){this.__data__=[];this.size=0}function listCacheDelete(key){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){return false}var lastIndex=data.length-1;if(index==lastIndex){data.pop()}else{splice.call(data,index,1)}--this.size;return true}function listCacheGet(key){var data=this.__data__,index=assocIndexOf(data,key);return index<0?undefined:data[index][1]}function listCacheHas(key){return assocIndexOf(this.__data__,key)>-1}function listCacheSet(key,value){var data=this.__data__,index=assocIndexOf(data,key);if(index<0){++this.size;data.push([key,value])}else{data[index][1]=value}return this}ListCache.prototype.clear=listCacheClear;ListCache.prototype["delete"]=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;function MapCache(entries){var index=-1,length=entries==null?0:entries.length;this.clear();while(++index<length){var entry=entries[index];this.set(entry[0],entry[1])}}function mapCacheClear(){this.size=0;this.__data__={"hash":new Hash,"map":new(Map||ListCache),"string":new Hash}}function mapCacheDelete(key){var result=getMapData(this,key)["delete"](key);this.size-=result?1:0;return result}function mapCacheGet(key){return getMapData(this,key).get(key)}function mapCacheHas(key){return getMapData(this,key).has(key)}function mapCacheSet(key,value){var data=getMapData(this,key),size=data.size;data.set(key,value);this.size+=data.size==size?0:1;return this}MapCache.prototype.clear=mapCacheClear;MapCache.prototype["delete"]=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function Stack(entries){var data=this.__data__=new ListCache(entries);this.size=data.size}function stackClear(){this.__data__=new ListCache;this.size=0}function stackDelete(key){var data=this.__data__,result=data["delete"](key);this.size=data.size;return result}function stackGet(key){return this.__data__.get(key)}function stackHas(key){return this.__data__.has(key)}function stackSet(key,value){var data=this.__data__;if(data instanceof ListCache){var pairs=data.__data__;if(!Map||pairs.length<LARGE_ARRAY_SIZE-1){pairs.push([key,value]);this.size=++data.size;return this}data=this.__data__=new MapCache(pairs)}data.set(key,value);this.size=data.size;return this}Stack.prototype.clear=stackClear;Stack.prototype["delete"]=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayLikeKeys(value,inherited){var isArr=isArray(value),isArg=!isArr&&isArguments(value),isBuff=!isArr&&!isArg&&isBuffer(value),isType=!isArr&&!isArg&&!isBuff&&isTypedArray(value),skipIndexes=isArr||isArg||isBuff||isType,result=skipIndexes?baseTimes(value.length,String):[],length=result.length;for(var key in value){if((inherited||hasOwnProperty.call(value,key))&&!(skipIndexes&&(key=="length"||isBuff&&(key=="offset"||key=="parent")||isType&&(key=="buffer"||key=="byteLength"||key=="byteOffset")||isIndex(key,length)))){result.push(key)}}return result}function assignMergeValue(object,key,value){if(value!==undefined&&!eq(object[key],value)||value===undefined&&!(key in object)){baseAssignValue(object,key,value)}}function assignValue(object,key,value){var objValue=object[key];if(!(hasOwnProperty.call(object,key)&&eq(objValue,value))||value===undefined&&!(key in object)){baseAssignValue(object,key,value)}}function assocIndexOf(array,key){var length=array.length;while(length--){if(eq(array[length][0],key)){return length}}return-1}function baseAssignValue(object,key,value){if(key=="__proto__"&&defineProperty){defineProperty(object,key,{"configurable":true,"enumerable":true,"value":value,"writable":true})}else{object[key]=value}}var baseFor=createBaseFor();function baseGetTag(value){if(value==null){return value===undefined?undefinedTag:nullTag}return symToStringTag&&symToStringTag in Object(value)?getRawTag(value):objectToString(value)}function baseIsArguments(value){return isObjectLike(value)&&baseGetTag(value)==argsTag}function baseIsNative(value){if(!isObject(value)||isMasked(value)){return false}var pattern=isFunction(value)?reIsNative:reIsHostCtor;return pattern.test(toSource(value))}function baseIsTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[baseGetTag(value)]}function baseKeysIn(object){if(!isObject(object)){return nativeKeysIn(object)}var isProto=isPrototype(object),result=[];for(var key in object){if(!(key=="constructor"&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key)}}return result}function baseMerge(object,source,srcIndex,customizer,stack){if(object===source){return}baseFor(source,function(srcValue,key){stack||(stack=new Stack);if(isObject(srcValue)){baseMergeDeep(object,source,key,srcIndex,baseMerge,customizer,stack)}else{var newValue=customizer?customizer(safeGet(object,key),srcValue,key+"",object,source,stack):undefined;if(newValue===undefined){newValue=srcValue}assignMergeValue(object,key,newValue)}},keysIn)}function baseMergeDeep(object,source,key,srcIndex,mergeFunc,customizer,stack){var objValue=safeGet(object,key),srcValue=safeGet(source,key),stacked=stack.get(srcValue);if(stacked){assignMergeValue(object,key,stacked);return}var newValue=customizer?customizer(objValue,srcValue,key+"",object,source,stack):undefined;var isCommon=newValue===undefined;if(isCommon){var isArr=isArray(srcValue),isBuff=!isArr&&isBuffer(srcValue),isTyped=!isArr&&!isBuff&&isTypedArray(srcValue);newValue=srcValue;if(isArr||isBuff||isTyped){if(isArray(objValue)){newValue=objValue}else if(isArrayLikeObject(objValue)){newValue=copyArray(objValue)}else if(isBuff){isCommon=false;newValue=cloneBuffer(srcValue,true)}else if(isTyped){isCommon=false;newValue=cloneTypedArray(srcValue,true)}else{newValue=[]}}else if(isPlainObject(srcValue)||isArguments(srcValue)){newValue=objValue;if(isArguments(objValue)){newValue=toPlainObject(objValue)}else if(!isObject(objValue)||isFunction(objValue)){newValue=initCloneObject(srcValue)}}else{isCommon=false}}if(isCommon){stack.set(srcValue,newValue);mergeFunc(newValue,srcValue,srcIndex,customizer,stack);stack["delete"](srcValue)}assignMergeValue(object,key,newValue)}function baseRest(func,start){return setToString(overRest(func,start,identity),func+"")}var baseSetToString=!defineProperty?identity:function(func,string){return defineProperty(func,"toString",{"configurable":true,"enumerable":false,"value":constant(string),"writable":true})};function cloneBuffer(buffer,isDeep){if(isDeep){return buffer.slice()}var length=buffer.length,result=allocUnsafe?allocUnsafe(length):new buffer.constructor(length);buffer.copy(result);return result}function cloneArrayBuffer(arrayBuffer){var result=new arrayBuffer.constructor(arrayBuffer.byteLength);new Uint8Array(result).set(new Uint8Array(arrayBuffer));return result}function cloneTypedArray(typedArray,isDeep){var buffer=isDeep?cloneArrayBuffer(typedArray.buffer):typedArray.buffer;return new typedArray.constructor(buffer,typedArray.byteOffset,typedArray.length)}function copyArray(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index]}return array}function copyObject(source,props,object,customizer){var isNew=!object;object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];var newValue=customizer?customizer(object[key],source[key],key,object,source):undefined;if(newValue===undefined){newValue=source[key]}if(isNew){baseAssignValue(object,key,newValue)}else{assignValue(object,key,newValue)}}return object}function createAssigner(assigner){return baseRest(function(object,sources){var index=-1,length=sources.length,customizer=length>1?sources[length-1]:undefined,guard=length>2?sources[2]:undefined;customizer=assigner.length>3&&typeof customizer=="function"?(length--,customizer):undefined;if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1}object=Object(object);while(++index<length){var source=sources[index];if(source){assigner(object,source,index,customizer)}}return object})}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var index=-1,iterable=Object(object),props=keysFunc(object),length=props.length;while(length--){var key=props[fromRight?length:++index];if(iteratee(iterable[key],key,iterable)===false){break}}return object}}function getMapData(map,key){var data=map.__data__;return isKeyable(key)?data[typeof key=="string"?"string":"hash"]:data.map}function getNative(object,key){var value=getValue(object,key);return baseIsNative(value)?value:undefined}function getRawTag(value){var isOwn=hasOwnProperty.call(value,symToStringTag),tag=value[symToStringTag];try{value[symToStringTag]=undefined;var unmasked=true}catch(e){}var result=nativeObjectToString.call(value);if(unmasked){if(isOwn){value[symToStringTag]=tag}else{delete value[symToStringTag]}}return result}function initCloneObject(object){return typeof object.constructor=="function"&&!isPrototype(object)?baseCreate(getPrototype(object)):{}}function isIndex(value,length){var type=typeof value;length=length==null?MAX_SAFE_INTEGER:length;return!!length&&(type=="number"||type!="symbol"&&reIsUint.test(value))&&value>-1&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(!isObject(object)){return false}var type=typeof index;if(type=="number"?isArrayLike(object)&&isIndex(index,object.length):type=="string"&&index in object){return eq(object[index],value)}return false}function isKeyable(value){var type=typeof value;return type=="string"||type=="number"||type=="symbol"||type=="boolean"?value!=="__proto__":value===null}function isMasked(func){return!!maskSrcKey&&maskSrcKey in func}function isPrototype(value){var Ctor=value&&value.constructor,proto=typeof Ctor=="function"&&Ctor.prototype||objectProto;return value===proto}function nativeKeysIn(object){var result=[];if(object!=null){for(var key in Object(object)){result.push(key)}}return result}function objectToString(value){return nativeObjectToString.call(value)}function overRest(func,start,transform){start=nativeMax(start===undefined?func.length-1:start,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),array=Array(length);while(++index<length){array[index]=args[start+index]}index=-1;var otherArgs=Array(start+1);while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=transform(array);return apply(func,this,otherArgs)}}function safeGet(object,key){if(key==="constructor"&&typeof object[key]==="function"){return}if(key=="__proto__"){return}return object[key]}var setToString=shortOut(baseSetToString);function shortOut(func){var count=0,lastCalled=0;return function(){var stamp=nativeNow(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return arguments[0]}}else{count=0}return func.apply(undefined,arguments)}}function toSource(func){if(func!=null){try{return funcToString.call(func)}catch(e){}try{return func+""}catch(e){}}return""}function eq(value,other){return value===other||value!==value&&other!==other}var isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(value){return isObjectLike(value)&&hasOwnProperty.call(value,"callee")&&!propertyIsEnumerable.call(value,"callee")};var isArray=Array.isArray;function isArrayLike(value){return value!=null&&isLength(value.length)&&!isFunction(value)}function isArrayLikeObject(value){return isObjectLike(value)&&isArrayLike(value)}var isBuffer=nativeIsBuffer||stubFalse;function isFunction(value){if(!isObject(value)){return false}var tag=baseGetTag(value);return tag==funcTag||tag==genTag||tag==asyncTag||tag==proxyTag}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isObject(value){var type=typeof value;return value!=null&&(type=="object"||type=="function")}function isObjectLike(value){return value!=null&&typeof value=="object"}function isPlainObject(value){if(!isObjectLike(value)||baseGetTag(value)!=objectTag){return false}var proto=getPrototype(value);if(proto===null){return true}var Ctor=hasOwnProperty.call(proto,"constructor")&&proto.constructor;return typeof Ctor=="function"&&Ctor instanceof Ctor&&funcToString.call(Ctor)==objectCtorString}var isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function toPlainObject(value){return copyObject(value,keysIn(value))}function keysIn(object){return isArrayLike(object)?arrayLikeKeys(object,true):baseKeysIn(object)}var merge=createAssigner(function(object,source,srcIndex){baseMerge(object,source,srcIndex)});function constant(value){return function(){return value}}function identity(value){return value}function stubFalse(){return false}module.exports=merge}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ReCaptchaLoader_1=require("./ReCaptchaLoader");exports.load=ReCaptchaLoader_1.load;exports.getInstance=ReCaptchaLoader_1.getInstance;var ReCaptchaInstance_1=require("./ReCaptchaInstance");exports.ReCaptchaInstance=ReCaptchaInstance_1.ReCaptchaInstance},{"./ReCaptchaInstance":3,"./ReCaptchaLoader":4}],3:[function(require,module,exports){"use strict";var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})};var __generator=this&&this.__generator||function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),"throw":verb(1),"return":verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue;}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}};Object.defineProperty(exports,"__esModule",{value:true});var ReCaptchaInstance=function(){function ReCaptchaInstance(siteKey,recaptcha){this.siteKey=siteKey;this.recaptcha=recaptcha;this.styleContainer=null}ReCaptchaInstance.prototype.execute=function(action){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(_a){return[2,this.recaptcha.execute(this.siteKey,{action:action})]})})};ReCaptchaInstance.prototype.getSiteKey=function(){return this.siteKey};ReCaptchaInstance.prototype.hideBadge=function(){if(this.styleContainer!==null){return}this.styleContainer=document.createElement("style");this.styleContainer.innerHTML=".grecaptcha-badge{display:none !important;}";document.head.appendChild(this.styleContainer)};ReCaptchaInstance.prototype.showBadge=function(){if(this.styleContainer===null){return}document.head.removeChild(this.styleContainer);this.styleContainer=null};return ReCaptchaInstance}();exports.ReCaptchaInstance=ReCaptchaInstance},{}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ReCaptchaInstance_1=require("./ReCaptchaInstance");var ELoadingState;(function(ELoadingState){ELoadingState[ELoadingState["NOT_LOADED"]=0]="NOT_LOADED";ELoadingState[ELoadingState["LOADING"]=1]="LOADING";ELoadingState[ELoadingState["LOADED"]=2]="LOADED"})(ELoadingState||(ELoadingState={}));var ReCaptchaLoader=function(){function ReCaptchaLoader(){}ReCaptchaLoader.load=function(siteKey,options){if(options===void 0){options={}}if(typeof document==="undefined"){return Promise.reject(new Error("This is a library for the browser!"))}if(ReCaptchaLoader.getLoadingState()===ELoadingState.LOADED){if(ReCaptchaLoader.instance.getSiteKey()===siteKey){return Promise.resolve(ReCaptchaLoader.instance)}else{return Promise.reject(new Error("reCAPTCHA already loaded with different site key!"))}}if(ReCaptchaLoader.getLoadingState()===ELoadingState.LOADING){if(siteKey!==ReCaptchaLoader.instanceSiteKey){return Promise.reject(new Error("reCAPTCHA already loaded with different site key!"))}return new Promise(function(resolve,reject){ReCaptchaLoader.successfulLoadingConsumers.push(function(instance){return resolve(instance)});ReCaptchaLoader.errorLoadingRunnable.push(function(reason){return reject(reason)})})}ReCaptchaLoader.instanceSiteKey=siteKey;ReCaptchaLoader.setLoadingState(ELoadingState.LOADING);var loader=new ReCaptchaLoader;return new Promise(function(resolve,reject){loader.loadScript(siteKey,options.useRecaptchaNet||false,options.renderParameters?options.renderParameters:{},options.customUrl).then(function(){ReCaptchaLoader.setLoadingState(ELoadingState.LOADED);var instance=new ReCaptchaInstance_1.ReCaptchaInstance(siteKey,grecaptcha);ReCaptchaLoader.successfulLoadingConsumers.forEach(function(v){return v(instance)});ReCaptchaLoader.successfulLoadingConsumers=[];if(options.autoHideBadge){instance.hideBadge()}ReCaptchaLoader.instance=instance;resolve(instance)}).catch(function(error){ReCaptchaLoader.errorLoadingRunnable.forEach(function(v){return v(error)});ReCaptchaLoader.errorLoadingRunnable=[];reject(error)})})};ReCaptchaLoader.getInstance=function(){return ReCaptchaLoader.instance};ReCaptchaLoader.setLoadingState=function(state){ReCaptchaLoader.loadingState=state};ReCaptchaLoader.getLoadingState=function(){if(ReCaptchaLoader.loadingState===null){return ELoadingState.NOT_LOADED}else{return ReCaptchaLoader.loadingState}};ReCaptchaLoader.prototype.loadScript=function(siteKey,useRecaptchaNet,renderParameters,customUrl){var _this=this;if(useRecaptchaNet===void 0){useRecaptchaNet=false}if(renderParameters===void 0){renderParameters={}}if(customUrl===void 0){customUrl=""}var scriptElement=document.createElement("script");scriptElement.setAttribute("recaptcha-v3-script","");var scriptBase="https://www.google.com/recaptcha/api.js";if(useRecaptchaNet){scriptBase="https://recaptcha.net/recaptcha/api.js"}if(customUrl){scriptBase=customUrl}var parametersQuery=this.buildQueryString(renderParameters);scriptElement.src=scriptBase+"?render="+siteKey+parametersQuery;return new Promise(function(resolve,reject){scriptElement.addEventListener("load",_this.waitForScriptToLoad(function(){resolve(scriptElement)}),false);scriptElement.onerror=function(error){ReCaptchaLoader.setLoadingState(ELoadingState.NOT_LOADED);reject(new Error("Something went wrong while loading ReCaptcha. ("+error.toString()+")"))};document.head.appendChild(scriptElement)})};ReCaptchaLoader.prototype.buildQueryString=function(parameters){var parameterKeys=Object.keys(parameters);if(parameterKeys.length<1){return""}return"&"+Object.keys(parameters).map(function(parameterKey){return parameterKey+"="+parameters[parameterKey]}).join("&")};ReCaptchaLoader.prototype.waitForScriptToLoad=function(callback){var _this=this;return function(){if(window.grecaptcha===undefined){setTimeout(function(){_this.waitForScriptToLoad(callback)},ReCaptchaLoader.SCRIPT_LOAD_DELAY)}else{window.grecaptcha.ready(function(){callback()})}}};ReCaptchaLoader.loadingState=null;ReCaptchaLoader.instance=null;ReCaptchaLoader.instanceSiteKey=null;ReCaptchaLoader.successfulLoadingConsumers=[];ReCaptchaLoader.errorLoadingRunnable=[];ReCaptchaLoader.SCRIPT_LOAD_DELAY=25;return ReCaptchaLoader}();exports.load=ReCaptchaLoader.load;exports.getInstance=ReCaptchaLoader.getInstance},{"./ReCaptchaInstance":3}],5:[function(require,module,exports){(function(){'use strict';function polyfill(){var w=window;var d=document;if("scrollBehavior"in d.documentElement.style&&w.__forceSmoothScrollPolyfill__!==true){return}var Element=w.HTMLElement||w.Element;var SCROLL_TIME=468;var original={scroll:w.scroll||w.scrollTo,scrollBy:w.scrollBy,elementScroll:Element.prototype.scroll||scrollElement,scrollIntoView:Element.prototype.scrollIntoView};var now=w.performance&&w.performance.now?w.performance.now.bind(w.performance):Date.now;function isMicrosoftBrowser(userAgent){var userAgentPatterns=["MSIE ","Trident/","Edge/"];return new RegExp(userAgentPatterns.join("|")).test(userAgent)}var ROUNDING_TOLERANCE=isMicrosoftBrowser(w.navigator.userAgent)?1:0;function scrollElement(x,y){this.scrollLeft=x;this.scrollTop=y}function ease(k){return 0.5*(1-Math.cos(Math.PI*k))}function shouldBailOut(firstArg){if(firstArg===null||typeof firstArg!=="object"||firstArg.behavior===undefined||firstArg.behavior==="auto"||firstArg.behavior==="instant"){return true}if(typeof firstArg==="object"&&firstArg.behavior==="smooth"){return false}throw new TypeError("behavior member of ScrollOptions "+firstArg.behavior+" is not a valid value for enumeration ScrollBehavior.")}function hasScrollableSpace(el,axis){if(axis==="Y"){return el.clientHeight+ROUNDING_TOLERANCE<el.scrollHeight}if(axis==="X"){return el.clientWidth+ROUNDING_TOLERANCE<el.scrollWidth}}function canOverflow(el,axis){var overflowValue=w.getComputedStyle(el,null)["overflow"+axis];return overflowValue==="auto"||overflowValue==="scroll"}function isScrollable(el){var isScrollableY=hasScrollableSpace(el,"Y")&&canOverflow(el,"Y");var isScrollableX=hasScrollableSpace(el,"X")&&canOverflow(el,"X");return isScrollableY||isScrollableX}function findScrollableParent(el){while(el!==d.body&&isScrollable(el)===false){el=el.parentNode||el.host}return el}function step(context){var time=now();var value;var currentX;var currentY;var elapsed=(time-context.startTime)/SCROLL_TIME;elapsed=elapsed>1?1:elapsed;value=ease(elapsed);currentX=context.startX+(context.x-context.startX)*value;currentY=context.startY+(context.y-context.startY)*value;context.method.call(context.scrollable,currentX,currentY);if(currentX!==context.x||currentY!==context.y){w.requestAnimationFrame(step.bind(w,context))}}function smoothScroll(el,x,y){var scrollable;var startX;var startY;var method;var startTime=now();if(el===d.body){scrollable=w;startX=w.scrollX||w.pageXOffset;startY=w.scrollY||w.pageYOffset;method=original.scroll}else{scrollable=el;startX=el.scrollLeft;startY=el.scrollTop;method=scrollElement}step({scrollable:scrollable,method:method,startTime:startTime,startX:startX,startY:startY,x:x,y:y})}w.scroll=w.scrollTo=function(){if(arguments[0]===undefined){return}if(shouldBailOut(arguments[0])===true){original.scroll.call(w,arguments[0].left!==undefined?arguments[0].left:typeof arguments[0]!=="object"?arguments[0]:w.scrollX||w.pageXOffset,arguments[0].top!==undefined?arguments[0].top:arguments[1]!==undefined?arguments[1]:w.scrollY||w.pageYOffset);return}smoothScroll.call(w,d.body,arguments[0].left!==undefined?~~arguments[0].left:w.scrollX||w.pageXOffset,arguments[0].top!==undefined?~~arguments[0].top:w.scrollY||w.pageYOffset)};w.scrollBy=function(){if(arguments[0]===undefined){return}if(shouldBailOut(arguments[0])){original.scrollBy.call(w,arguments[0].left!==undefined?arguments[0].left:typeof arguments[0]!=="object"?arguments[0]:0,arguments[0].top!==undefined?arguments[0].top:arguments[1]!==undefined?arguments[1]:0);return}smoothScroll.call(w,d.body,~~arguments[0].left+(w.scrollX||w.pageXOffset),~~arguments[0].top+(w.scrollY||w.pageYOffset))};Element.prototype.scroll=Element.prototype.scrollTo=function(){if(arguments[0]===undefined){return}if(shouldBailOut(arguments[0])===true){if(typeof arguments[0]==="number"&&arguments[1]===undefined){throw new SyntaxError("Value could not be converted")}original.elementScroll.call(this,arguments[0].left!==undefined?~~arguments[0].left:typeof arguments[0]!=="object"?~~arguments[0]:this.scrollLeft,arguments[0].top!==undefined?~~arguments[0].top:arguments[1]!==undefined?~~arguments[1]:this.scrollTop);return}var left=arguments[0].left;var top=arguments[0].top;smoothScroll.call(this,this,typeof left==="undefined"?this.scrollLeft:~~left,typeof top==="undefined"?this.scrollTop:~~top)};Element.prototype.scrollBy=function(){if(arguments[0]===undefined){return}if(shouldBailOut(arguments[0])===true){original.elementScroll.call(this,arguments[0].left!==undefined?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,arguments[0].top!==undefined?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop);return}this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior})};Element.prototype.scrollIntoView=function(){if(shouldBailOut(arguments[0])===true){original.scrollIntoView.call(this,arguments[0]===undefined?true:arguments[0]);return}var scrollableParent=findScrollableParent(this);var parentRects=scrollableParent.getBoundingClientRect();var clientRects=this.getBoundingClientRect();if(scrollableParent!==d.body){smoothScroll.call(this,scrollableParent,scrollableParent.scrollLeft+clientRects.left-parentRects.left,scrollableParent.scrollTop+clientRects.top-parentRects.top);if(w.getComputedStyle(scrollableParent).position!=="fixed"){w.scrollBy({left:parentRects.left,top:parentRects.top,behavior:"smooth"})}}else{w.scrollBy({left:clientRects.left,top:clientRects.top,behavior:"smooth"})}}}if(typeof exports==="object"&&typeof module!=="undefined"){module.exports={polyfill:polyfill}}else{polyfill()}})()},{}],6:[function(require,module,exports){var merge=require("lodash.merge");var Config={init:function(custom_config){"use strict";var config={environment:"production",project_id:"",project_name:"",author_id:"",author_name:"",country:"",content_type:"",content_id:"",content_url:"",content_title:"",container:{class:"sg-feedback"},rating:{element:"div",id:"feedback-rating",class:"sg-feedback__rating"},rating_title:{element:"div",id:"rating-title",class:"sg-feedback__rating-title",text:"Este conte\xFAdo foi \xFAtil?",visible:true},rating_option:{element:"div",class:"sg-feedback__rating-radio"},rating_option_radio:{element:"input",id:"sg-feedback-radio-",name:"checkRating",type:"radio",visible:true,options:[{type:"positive",class:"sg-feedback__rating-label--positive",text:"sim",value:"100",improvement_title:"Obrigado. Como podemos melhorar ainda mais?",improvement_comment_placeholder:"Escreva aqui",improvement_options:[]},{type:"negative",class:"sg-feedback__rating-label--negative",text:"n\xE3o",value:"0",improvement_title:"Como podemos melhorar?",improvement_comment_placeholder:"Escreva aqui para que possamos melhorar",improvement_options:["Este conte\xFAdo cont\xE9m informa\xE7\xE3o incorreta","Este conte\xFAdo n\xE3o tem a informa\xE7\xE3o que procuro","Outro"]}]},rating_radio_label:{element:"label",id:"rating",class:"sg-feedback__rating-label"},improvement_wrapper:{element:"div",id:"improvement_wrapper",class:"sg-feedback__dialog"},improvement_form:{element:"div",id:"feedback-improvement",class:"sg-feedback__improvement",visible:true},improvement_type:{element:"div",id:"feedback-improvement-type",class:"sg-feedback__improvement-type"},improvement_type_title:{element:"div",id:"feedback-improvement-title",class:"sg-feedback__improvement-title",visible:true},improvement_commentsbutton_wrapper:{element:"div",id:"feedback-improvement-wrapper",class:"sg-feedback__improvement-wrapper",visible:true},improvement_comments:{element:"textarea",id:"feedback-improvement-comments",class:"sg-feedback__comments",visible:true},improvement_button:{element:"button",id:"feedback-improvement-submit",class:"sg-feedback__improvement-submit",text:"Enviar",visible:true},message_thanks:{element:"div",id:"feedback-message",class:"sg-feedback__message",text:"Obrigado. A sua opini\xE3o foi registrada",visible:true},message_thanks_click:{element:"div",id:"feedback-message",class:"sg-feedback__message",text:"Obrigado. A sua opini\xE3o foi registrada",visible:false},recaptcha:{key:"6LeIVbkUAAAAADGkHSlBXnc0gqOSr6olTGfFZ4SJ",visible:true},elastic:{stg_endpoint:"https://api.stg.pt/feedback/v1/",dev_endpoint:"https://api.stg.pt/feedback/v1/",prod_endpoint:"https://api.7gra.us/feedback/v1/",postFeedback:"feedbacks"}};var config_extend=merge(config,custom_config);this.verifyMandatoryVariables(config_extend);if(!config_extend.endpoint){if(config_extend.environment==="development"){config_extend.endpoint=config_extend.elastic.dev_endpoint}else if(config_extend.environment==="staging"){config_extend.endpoint=config_extend.elastic.stg_endpoint}else{config_extend.endpoint=config_extend.elastic.prod_endpoint}}return config_extend},verifyMandatoryVariables:function(options){var mandatoryFields=["project_id","project_name","type","type_id","type_url","type_title"];var errors=[];mandatoryFields.forEach(function(element){if(!options.hasOwnProperty(element)){errors.push(element+" is mandatory")}else{if(options[element]===""){errors.push(element+" cannot be empty")}}});if(errors.length!==0){return"Error: "+errors.toString()}}};module.exports=Config},{"lodash.merge":1}],7:[function(require,module,exports){var DOMManipulation={create:function(attributes,parent){var object=null;for(var attribute in attributes){var value=attributes[attribute];switch(attribute){case"element":object=document.createElement(value);break;case"text":this.createText(object,value);break;case"visible":break;default:object.setAttribute(attribute,value);break;}}if(parent){this.append(parent,object)}return object},getElement:function(element){if(document.getElementById(element)){return document.getElementById(element)}else{console.log("Element "+element+" doesn't exists")}},append:function(parent,child){parent.appendChild(child)},createText:function(parent,text){var text_element=document.createTextNode(text);this.append(parent,text_element)},hideElement:function(element){document.getElementById(element).classList.remove("active")},hideImprovementChilds:function(element){var improvementChilds=document.getElementById(element).childNodes;for(var i=0;i<improvementChilds.length;i++){improvementChilds[i].classList.remove("active")}},showElement:function(element){if(document.getElementById(element)){document.getElementById(element).classList.add("active")}else{return document.getElementById(element)}},updateElement:function(element){if(document.getElementById(element)){document.getElementById(element).classList.add("update");setTimeout(function(){document.getElementById(element).classList.remove("update")},1000)}else{return document.getElementById(element)}}};module.exports=DOMManipulation},{}],8:[function(require,module,exports){var GaEvent={sendEventToGoogle:function(feedback,url){url=typeof url==="undefined"?"":url;if(typeof gtag!=="undefined"){gtag("event",feedback,{event_category:"Sg_Feedbacks",event_label:url})}else if(typeof ga!=="undefined"){ga("send","event","Sg_Feedbacks",feedback,url,0)}}};module.exports=GaEvent},{}],9:[function(require,module,exports){var DOM=require("./DOMManipulation");var Config=require("./Config");var ReCaptchaLoader=require("recaptcha-v3");var GaEvent=require("./GaEvent");var smoothScroll=require("smoothscroll-polyfill");window.__sg_feedback={};smoothScroll.polyfill();function Feedback(custom_config){"use strict";this.config=Config.init(custom_config);window.__sg_feedback.id=0;this.build()}var _prototype=Feedback.prototype;_prototype.build=function(){var feedback_form=document.querySelector(".sg-feedback");feedback_form.setAttribute("data-nosnippet","");var ratingDiv=this.createRatingDiv(feedback_form);this.createRatingTitle(ratingDiv);this.createRatingOption(ratingDiv);var improvementWrapper=this.createImprovementWrapper(feedback_form);this.createThanksMessageDiv(improvementWrapper);var improvementDiv=this.createImprovementDiv(improvementWrapper);this.createImprovementFormType(improvementDiv);this.addRatingEvents();this.addRadioEvent();var feedbackFormParent=feedback_form.parentNode;var containerDiv=document.createElement("div");containerDiv.classList.add("sg-feedback__wrapper");feedbackFormParent.replaceChild(containerDiv,feedback_form);containerDiv.appendChild(feedback_form);if(this.config.message_thanks_click.visible===true){DOM.hideElement(this.config.message_thanks_click.id)}};_prototype.createRatingDiv=function(parent){return DOM.create(this.config.rating,parent)};_prototype.createImprovementWrapper=function(parent){return DOM.create(this.config.improvement_wrapper,parent)};_prototype.createRatingTitle=function(parent){if(this.config.rating_title.visible===true){return DOM.create(this.config.rating_title,parent)}return null};_prototype.createRatingOption=function(parent){for(var i=0;i<this.config.rating_option_radio.options.length;i++){var option_rating=this.config.rating_option_radio.options[i];var rating_options=DOM.create(this.config.rating_option,parent);DOM.create({element:this.config.rating_option_radio.element,id:this.config.rating_option_radio.id+"-"+option_rating.value,type:this.config.rating_option_radio.type,name:this.config.rating_option_radio.name,value:option_rating.value},rating_options);DOM.create({element:this.config.rating_radio_label.element,class:option_rating.class,text:option_rating.text,for:this.config.rating_option_radio.id+"-"+option_rating.value,"data-type":option_rating.type},rating_options)}};_prototype.createImprovementDiv=function(parent){if(this.config.improvement_form.visible===true){return DOM.create(this.config.improvement_form,parent)}return null};_prototype.createImprovementFormType=function(parent){if(this.config.improvement_form.visible===true){for(var i=0;i<this.config.rating_option_radio.options.length;i++){var rating_options=this.config.rating_option_radio.options[i];var feedback_improvement_option=DOM.create({element:this.config.improvement_type.element,id:this.config.improvement_type.id+"-"+rating_options.type,class:this.config.improvement_type.class+" "+this.config.improvement_type.class+"--"+rating_options.type},parent);this.createImprovementTitle(rating_options,feedback_improvement_option);rating_options.improvement_options=rating_options.improvement_options?rating_options.improvement_options:[];if(rating_options.improvement_options.length>0){this.createImprovementOptions(rating_options,feedback_improvement_option)}}}};_prototype.createImprovementTitle=function(type,parent){var improvement_title=null;if(this.config.improvement_type_title.visible===true){improvement_title=DOM.create({element:this.config.improvement_type_title.element,id:this.config.improvement_type_title.id+"-"+type.type,class:this.config.improvement_type_title.class+" "+this.config.improvement_type_title.class+"--"+type.type,text:type.improvement_title},parent)}return improvement_title};_prototype.createImprovementOptions=function(rating_options,parent){if(this.config.rating_option_radio.visible===true&&rating_options.improvement_options){var ListImprovement=DOM.create({element:"ul"},parent);for(var j=0;j<rating_options.improvement_options.length;j++){var ListItemImprovement=DOM.create({element:"li",class:"deselected"},ListImprovement);DOM.create({element:"input",type:"radio",id:"improvement"+rating_options.value+"Option-"+j,name:"improvement"+rating_options.value+"Option",value:rating_options.improvement_options[j]},ListItemImprovement);DOM.create({element:"label",for:"improvement"+rating_options.value+"Option-"+j,text:rating_options.improvement_options[j]},ListItemImprovement)}}return null};_prototype.getImprovementOptions=function(type){return this.config.rating_option_radio.options.filter(function(radio){return radio.type===type})[0]};_prototype.createImprovementComments=function(parent){if(this.config.improvement_form.visible&&this.config.improvement_comments.visible){return DOM.create(this.config.improvement_comments,parent)}return null};_prototype.createImprovementButton=function(parent){if(this.config.improvement_form.visible===true&&this.config.improvement_comments.visible===true&&this.config.rating_option_radio.visible===true){return DOM.create(this.config.improvement_button,parent)}return null};_prototype.createThanksMessageDiv=function(parent){if(this.config.message_thanks_click.visible===true){DOM.create(this.config.message_thanks_click,parent)}return null};_prototype.addRatingEvents=function(){var ratingFirstStep=document.querySelectorAll("#"+this.config.rating.id+" [data-type]");if(ratingFirstStep){var _self=this;for(var i=0;i<ratingFirstStep.length;i++){ratingFirstStep[i].addEventListener("click",function(event){var targetElement=event.target;if(targetElement.parentNode.classList.contains("selected")){return}if(window.innerWidth<=540){var targetElementWindowPos=targetElement.getBoundingClientRect().top+window.scrollY-120;window.scroll({top:targetElementWindowPos,left:0,behavior:"smooth"})}DOM.hideImprovementChilds(_self.config.improvement_form.id);if(document.getElementById(_self.config.message_thanks_click.id)&&_self.config.message_thanks_click.visible===true){DOM.hideElement(_self.config.message_thanks_click.id)}if(document.getElementById(_self.config.message_thanks.id)&&_self.config.message_thanks.visible===true){DOM.hideElement(_self.config.message_thanks.id)}if(!localStorage.getItem("feedback-action")){localStorage.setItem("feedback-action","POST")}localStorage.setItem("sg-feedback-rating-text",targetElement.dataset.type);localStorage.setItem("sg-feedback-rating-value",targetElement.previousSibling.value);document.querySelectorAll("."+_self.config.rating_option.class).forEach(function(radio){radio.classList.add("deselected");radio.classList.remove("selected")});targetElement.parentNode.classList.remove("deselected");targetElement.parentNode.classList.add("selected");document.querySelectorAll("."+_self.config.improvement_type.class+" li").forEach(function(radioRatingSecondStep){if(radioRatingSecondStep){radioRatingSecondStep.classList.remove("selected");radioRatingSecondStep.classList.add("deselected")}});_self.resetFields();_self.showFeedback(targetElement,_self.config.message_thanks_click);if(window.__sg_feedback.id===0){_self.saveFeedback().then(function(res){window.__sg_feedback.id=res})}else{_self.updateFeedback()}if(document.querySelector("#feedback-improvement-wrapper")){document.querySelector("#feedback-improvement-wrapper").remove()}var lastRadioImprovement=document.querySelector("#feedback-improvement-type-"+targetElement.dataset.type+" li:last-child");if(_self.getImprovementOptions(targetElement.dataset.type).improvement_options.length===0){lastRadioImprovement=document.querySelector("#feedback-improvement-type-"+targetElement.dataset.type)}var addCollapseDiv=DOM.create(_self.config.improvement_commentsbutton_wrapper,lastRadioImprovement);_self.createImprovementComments(addCollapseDiv);_self.createImprovementButton(addCollapseDiv);_self.addTextareaEvent(targetElement.dataset.type)})}}};_prototype.addButtonEvent=function(){var button=document.getElementById(this.config.improvement_button.id);var _self=this;button.addEventListener("click",function(){_self.updateFeedback();if(_self.config.message_thanks.visible===true){var checkedRadio=document.querySelector("#"+_self.config.rating.id+" input:checked").nextSibling;_self.showFeedback(checkedRadio,_self.config.message_thanks)}DOM.hideImprovementChilds(_self.config.improvement_form.id);DOM.hideElement(_self.config.improvement_form.id);DOM.hideElement(_self.config.improvement_comments.id);DOM.hideElement(_self.config.improvement_button.id);DOM.hideElement(_self.config.improvement_type.id+"-"+checkedRadio.dataset.type)})};_prototype.addRadioEvent=function(){var _self=this;var improvementOptions=document.querySelectorAll("[id^='feedback-improvement-type'] input[id^='improvement']");for(var i=0;i<improvementOptions.length;i++){improvementOptions[i].addEventListener("change",function(e){_self.selectedRadio=e.target;if(document.querySelector("#"+_self.config.improvement_comments.id)){document.querySelector("#"+_self.config.improvement_comments.id).value=""}_self.selectedRadio.checked=true;if(document.querySelector("#feedback-improvement-wrapper")){document.querySelector("#feedback-improvement-wrapper").remove()}var addCollapseDiv=DOM.create(_self.config.improvement_commentsbutton_wrapper,_self.selectedRadio.parentNode);improvementOptions.forEach(function(improvementOption){improvementOption.parentNode.classList.add("deselected");improvementOption.parentNode.classList.remove("selected")});_self.selectedRadio.parentNode.classList.remove("deselected");_self.selectedRadio.parentNode.classList.add("selected");DOM.create(_self.config.improvement_comments,addCollapseDiv);DOM.create(_self.config.improvement_button,addCollapseDiv);document.querySelector("#"+_self.config.improvement_comments.id).focus();document.querySelector("#"+_self.config.improvement_button.id).disabled=true;_self.addTextareaEvent(document.querySelector(".sg-feedback__rating-radio.selected label").dataset.type);_self.updateFeedback()})}};_prototype.addTextareaEvent=function(type){var _self=this;var selectedImprovementOptions=_self.getImprovementOptions(type);var comment=document.querySelector("#"+this.config.improvement_comments.id);comment.placeholder=selectedImprovementOptions.improvement_comment_placeholder;var button=document.querySelector("#"+this.config.improvement_button.id);button.disabled=true;comment.addEventListener("focusin",function(e){var liOptions=e.target.parentNode.parentNode;if(liOptions.tagName==="LI"){liOptions.querySelector("input").checked=true;liOptions.classList.remove("deselected");liOptions.classList.add("selected");_self.updateFeedback();if(comment.parentNode.parentNode.classList.contains("deselected")){comment.value=""}}});comment.addEventListener("focusout",function(e){if(e.relatedTarget&&e.relatedTarget.id===_self.config.improvement_button.id){return}if(e.target.value.length>2){_self.updateFeedback().then(function(){if(comment.parentNode.parentNode&&comment.parentNode.parentNode.classList.contains("deselected")){comment.value=""}})}});comment.addEventListener("keyup",function(e){if(e.target.value.length>2){button.disabled=false}else{button.disabled=true}});_self.addButtonEvent()};_prototype.getFormData=function(action,config){return this.createRecaptchaToken(config).then(function(resolve){var formData=new FormData;formData.append("project_id",resolve.config.project_id);formData.append("project_name",resolve.config.project_name);formData.append("content_title",resolve.config.content_title);formData.append("content_url",resolve.config.content_url);formData.append("author_id",resolve.config.author_id);formData.append("author_name",resolve.config.author_name);formData.append("content_type",resolve.config.content_type);formData.append("content_id",resolve.config.content_id);formData.append("rating_nps",localStorage.getItem("sg-feedback-rating-text"));formData.append("rating_value",parseInt(localStorage.getItem("sg-feedback-rating-value")));if(resolve.config.source){formData.append("source",resolve.config.source)}formData.append("recaptcha_token",resolve.token);if(resolve.config.country){formData.append("country",resolve.config.country)}if(action==="PUT"){var comment="";if(DOM.getElement(resolve.config.improvement_comments.id)){comment=DOM.getElement(resolve.config.improvement_comments.id).value}formData.append("rating_note",comment);var radios=document.getElementsByName("improvement"+localStorage.getItem("sg-feedback-rating-value")+"Option");var improvement_option="";for(var i=0,length=radios.length;i<length;i++){if(radios[i].checked){improvement_option=radios[i].value;break}}formData.append("rating_category",improvement_option)}else{GaEvent.sendEventToGoogle(formData.get("rating_nps"),formData.get("content_url"))}var object={};formData.forEach(function(value,key){object[key]=value});return JSON.stringify(object)}).catch(function(){throw new Error("Error in Recaptcha")})};_prototype.saveFeedback=function(){var url=this.config.endpoint+this.config.elastic.postFeedback;return this.getFormData("POST",this.config).then(function(res){return new Promise(function(resolve,reject){var Http=new XMLHttpRequest;Http.open("POST",url);Http.setRequestHeader("Content-type","application/json;");Http.send(res);Http.onreadystatechange=function(){if(Http.readyState===4){var response=JSON.parse(Http.response);if(Http.status>=200&&Http.status<300){if(response.data["last_inserted_id"]){resolve(response.data["last_inserted_id"])}}else{reject(Http.statusText)}}}})})};_prototype.updateFeedback=function(){var _self=this;var getForm=function(_self){return _self.getFormData("PUT",_self.config).then(function(resolve){var url=_self.config.endpoint+_self.config.elastic.postFeedback+"/"+window.__sg_feedback.id;var Http=new XMLHttpRequest;Http.open("PUT",url);Http.setRequestHeader("Content-type","application/json;");Http.send(resolve)})};if(window.__sg_feedback.id!==0){return getForm(this)}else{var checkId=setInterval(function(){if(window.__sg_feedback.id!==0){clearInterval(checkId);return getForm(_self)}},100);return checkId}};_prototype.showFeedback=function(elementSource,message){document.getElementsByClassName(this.config.container.class)[0].parentNode.classList.add("active");DOM.showElement(this.config.improvement_form.id);if(message.visible===true){if(!document.getElementById(message.id)){var messageDiv=DOM.create(message);document.querySelector("#improvement_wrapper").prepend(messageDiv)}document.getElementById(message.id).innerText=message.text;DOM.showElement(message.id)}if(this.config.improvement_form.visible===true){DOM.showElement(this.config.improvement_type.id+"-"+elementSource.dataset.type)}};_prototype.resetFields=function(){var radioButtonsType=document.querySelectorAll("#"+this.config.improvement_form.id+" input");radioButtonsType.forEach(function(input){input.checked=false});if(document.getElementById(this.config.improvement_comments.id)){document.getElementById(this.config.improvement_comments.id).value=""}};_prototype.createRecaptchaToken=function(config){return ReCaptchaLoader.load(config.recaptcha.key,{autoHideBadge:config.recaptcha.visible}).then(function(recaptcha){return recaptcha.execute("homepage").then(function(token){localStorage.setItem("gRecaptchaResponse",token);return{config:config,token:token}},function(error){console.error(error)})})};module.exports=Feedback},{"./Config":6,"./DOMManipulation":7,"./GaEvent":8,"recaptcha-v3":2,"smoothscroll-polyfill":5}]},{},[9])(9)});